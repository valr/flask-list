{% extends 'base.html.jinja' %}
{% from 'bootstrap/utils.html' import render_icon %}

{% block content %}
    <h4 class="text-center mt-3 mb-0">
        <a class="text-dark text-decoration-none"
            href="{{ url_for('list.list') }}">
            {{ list.name }}
            <span class="text-secondary">
                {{ render_icon('ui-checks-grid') }}
            </span>
        </a>
    </h4>
    {% set category, item, list_item = 0, 1, 2 %}
    {% for ci in categories_items %}
        {% if loop.previtem is not defined or
            ( loop.previtem is defined and
              loop.previtem[category].category_id != ci[category].category_id ) %}
        <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover table-sm mt-3 mb-0">
                <thead class="table-primary text-white">
                    <tr>
                        <th class="col-12 align-middle"
                            role="button"
                            data-toggle="collapse"
                            href="#collapse{{ ci[category].category_id }}">
                            {{ ci[category].name }}
                        </th>
                        <th class="dropdown dropdown-list col-0 align-middle text-center">
                            <button class="dropdown-toggle btn btn-sm shadow-none text-primary"
                                type="button"
                                data-toggle="dropdown"
                                data-display="static">
                                {{ render_icon('arrow-repeat') }}
                            </button>
                            <div class="dropdown-menu dropdown-menu-right align-middle">
                                <button class="dropdown-item"
                                    type="button"
                                    dropdown-item-id="selection">
                                    {{ render_icon('check-square') }}
                                    &nbsp; &nbsp; Selection
                                </button>
                                <button class="dropdown-item"
                                    type="button"
                                    dropdown-item-id="number">
                                    {{ render_icon('calculator') }}
                                    &nbsp; &nbsp; Number
                                </button>
                                <button class="dropdown-item"
                                    type="button"
                                    dropdown-item-id="text">
                                    {{ render_icon('card-text') }}
                                    &nbsp; &nbsp; Text
                                </button>
                                <div class="dropdown-divider"></div>
                                <button class="dropdown-item"
                                    type="button"
                                    dropdown-item-id="none">
                                    {{ render_icon('square') }}
                                    &nbsp; &nbsp; Unselect
                                </button>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody class="collapse show" id="collapse{{ ci[category].category_id }}">
        {% endif %}
        {% include 'list/item/list_item.html.jinja' %}
        {% if loop.nextitem is not defined or
            ( loop.nextitem is defined and
              loop.nextitem[category].category_id != ci[category].category_id ) %}
                </tbody>
            </table>
        </div>
        {% endif %}
    {% endfor %}
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script nonce="{{ csp_nonce() }}">
        {% include 'list/item/list_item.js' %}
        {% include 'cancel.js' %}
        {% include 'collapse.js' %}
        {% include 'scroll.js' %}
    </script>
{% endblock %}
